(()=>{"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c;function i(t,e){return c||(c=document.createElement("a")),c.href=e,t===c.href}function l(t){return 0===Object.keys(t).length}function a(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function u(t,e,n){t.$$.on_destroy.push(a(e,n))}new Set;const d="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;class f{constructor(t){this.options=t,this._listeners="WeakMap"in d?new WeakMap:void 0}observe(t,e){return this._listeners.set(t,e),this._getObserver().observe(t,this.options),()=>{this._listeners.delete(t),this._observer.unobserve(t)}}_getObserver(){var t;return null!==(t=this._observer)&&void 0!==t?t:this._observer=new ResizeObserver((t=>{var e;for(const n of t)f.entries.set(n.target,n),null===(e=this._listeners.get(n.target))||void 0===e||e(n)}))}}f.entries="WeakMap"in d?new WeakMap:void 0;let h,p=!1;function m(t,e){t.appendChild(e)}function $(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode&&t.parentNode.removeChild(t)}function b(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function x(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function v(t){return document.createTextNode(t)}function w(){return v(" ")}function _(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function k(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function E(t,e){e=""+e,t.data!==e&&(t.data=e)}function C(t,e){t.value=null==e?"":e}function M(t){h=t}new Map;const S=[],A=[];let O=[];const L=[],N=Promise.resolve();let T=!1;function B(t){O.push(t)}const D=new Set;let I=0;function F(){if(0!==I)return;const t=h;do{try{for(;I<S.length;){const t=S[I];I++,M(t),z(t.$$)}}catch(t){throw S.length=0,I=0,t}for(M(null),S.length=0,I=0;A.length;)A.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];D.has(e)||(D.add(e),e())}O.length=0}while(S.length);for(;L.length;)L.pop()();T=!1,D.clear(),M(t)}function z(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(B)}}const H=new Set;let q,J;function j(t,e){t&&t.i&&(H.delete(t),t.i(e))}function R(t,e,n,o){if(t&&t.o){if(H.has(t))return;H.add(t),q.c.push((()=>{H.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function W(t){t&&t.c()}function X(t,n,s,c){const{fragment:i,after_update:l}=t.$$;i&&i.m(n,s),c||B((()=>{const n=t.$$.on_mount.map(e).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),l.forEach(B)}function G(t,e){const n=t.$$;null!==n.fragment&&(function(t){const e=[],n=[];O.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),O=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function P(e,r,s,c,i,l,a,u=[-1]){const d=h;M(e);const f=e.$$={fragment:null,ctx:[],props:l,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(d?d.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:r.target||d.$$.root};a&&a(f.root);let m=!1;if(f.ctx=s?s(e,r.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return f.ctx&&i(f.ctx[t],f.ctx[t]=r)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](r),m&&function(t,e){-1===t.$$.dirty[0]&&(S.push(t),T||(T=!0,N.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],f.update(),m=!0,o(f.before_update),f.fragment=!!c&&c(f.ctx),r.target){if(r.hydrate){p=!0;const t=($=r.target,Array.from($.childNodes));f.fragment&&f.fragment.l(t),t.forEach(g)}else f.fragment&&f.fragment.c();r.intro&&j(e.$$.fragment),X(e,r.target,r.anchor,r.customElement),p=!1,F()}var $;M(d)}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(J=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(r);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){o(this.$$.on_disconnect)}$destroy(){G(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){this.$$set&&!l(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class U{$destroy(){G(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){this.$$set&&!l(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Y=[];function K(e,n=t){let o;const r=new Set;function c(t){if(s(e,t)&&(e=t,o)){const t=!Y.length;for(const t of r)t[1](),Y.push(t,e);if(t){for(let t=0;t<Y.length;t+=2)Y[t][0](Y[t+1]);Y.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(s,i=t){const l=[s,i];return r.add(l),1===r.size&&(o=n(c)||t),s(e),()=>{r.delete(l),0===r.size&&o&&(o(),o=null)}}}}const Q=K([]),V=K(!0),Z=K(""),tt=function(e,n,s){const c=!Array.isArray(e),i=c?[e]:e,l=n.length<2;return{subscribe:K(void 0,(e=>{let s=!1;const u=[];let d=0,f=t;const h=()=>{if(d)return;f();const o=n(c?u[0]:u);l?e(o):f=r(o)?o:t},p=i.map(((t,e)=>a(t,(t=>{u[e]=t,d&=~(1<<e),s&&h()}),(()=>{d|=1<<e}))));return s=!0,h(),function(){o(p),f(),s=!1}})).subscribe}}([V,Z,Q],(([t,e,n])=>{let o=[];return o=t?n:n.filter((t=>t.expense)),e&&(o=o.filter((t=>t.description.toLowerCase().includes(e.toLowerCase())))),o})),et=K(0);function nt(t){const e=new Date(t).toLocaleDateString().split("/"),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(e[0])-1];return`${e[1]} ${n}`}function ot(t,e,n){const o=t.slice();return o[4]=e[n],o}function rt(t){let e,n,o,r,s,c;return{c(){e=x("svg"),n=x("path"),o=x("path"),r=x("path"),s=x("path"),c=x("path"),k(n,"stroke","none"),k(n,"d","M0 0h24v24H0z"),k(n,"fill","none"),k(o,"d","M14 3v4a1 1 0 0 0 1 1h4"),k(r,"d","M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"),k(s,"d","M9 17h6"),k(c,"d","M9 13h6"),k(e,"xmlns","http://www.w3.org/2000/svg"),k(e,"class","text-primary"),k(e,"width","12"),k(e,"height","12"),k(e,"viewBox","0 0 24 24"),k(e,"stroke-width","2"),k(e,"stroke","currentColor"),k(e,"fill","none"),k(e,"stroke-linecap","round"),k(e,"stroke-linejoin","round")},m(t,i){$(t,e,i),m(e,n),m(e,o),m(e,r),m(e,s),m(e,c)},d(t){t&&g(e)}}}function st(t){let e,n,o,r,s,c,i,l,a,u,d,f,h,p,b,x,C,M,S,A=t[4].description+"",O=t[1].format(t[4].amount)+"",L=t[4].account+"",N=nt(t[4].created_at)+"",T=t[4].expense&&rt();function B(){return t[3](t[4])}return{c(){e=y("tr"),n=y("td"),o=v(A),r=w(),T&&T.c(),i=w(),l=y("td"),a=v(O),d=w(),f=y("td"),h=v(L),p=w(),b=y("td"),x=v(N),C=w(),k(n,"data-bs-toggle",s=t[4].expense?"modal":""),k(n,"data-bs-target",c=t[4].expense?"#expense-modal":""),k(l,"class",u="DEBIT"===t[4].action?"text-danger":"text-success")},m(t,s){$(t,e,s),m(e,n),m(n,o),m(n,r),T&&T.m(n,null),m(e,i),m(e,l),m(l,a),m(e,d),m(e,f),m(f,h),m(e,p),m(e,b),m(b,x),m(e,C),M||(S=_(e,"click",B),M=!0)},p(e,r){t=e,1&r&&A!==(A=t[4].description+"")&&E(o,A),t[4].expense?T||(T=rt(),T.c(),T.m(n,null)):T&&(T.d(1),T=null),1&r&&s!==(s=t[4].expense?"modal":"")&&k(n,"data-bs-toggle",s),1&r&&c!==(c=t[4].expense?"#expense-modal":"")&&k(n,"data-bs-target",c),1&r&&O!==(O=t[1].format(t[4].amount)+"")&&E(a,O),1&r&&u!==(u="DEBIT"===t[4].action?"text-danger":"text-success")&&k(l,"class",u),1&r&&L!==(L=t[4].account+"")&&E(h,L),1&r&&N!==(N=nt(t[4].created_at)+"")&&E(x,N)},d(t){t&&g(e),T&&T.d(),M=!1,S()}}}function ct(e){let n,o,r,s,c,i=e[0],l=[];for(let t=0;t<i.length;t+=1)l[t]=st(ot(e,i,t));return{c(){n=y("div"),o=y("table"),r=y("thead"),r.innerHTML='<tr><th scope="col">Description</th> \n                <th scope="col">Amount</th> \n                <th scope="col">Account</th> \n                <th scope="col">Date</th></tr>',s=w(),c=y("tbody");for(let t=0;t<l.length;t+=1)l[t].c();k(o,"class","table table-hover"),k(n,"class","card-body")},m(t,e){$(t,n,e),m(n,o),m(o,r),m(o,s),m(o,c);for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(c,null)},p(t,[e]){if(3&e){let n;for(i=t[0],n=0;n<i.length;n+=1){const o=ot(t,i,n);l[n]?l[n].p(o,e):(l[n]=st(o),l[n].c(),l[n].m(c,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=i.length}},i:t,o:t,d(t){t&&g(n),b(l,t)}}}function it(t,e,n){let o;u(t,tt,(t=>n(0,o=t)));let{currency:r=""}=e;const s=new Intl.NumberFormat("en-US",{style:"currency",currency:r});return t.$$set=t=>{"currency"in t&&n(2,r=t.currency)},[o,s,r,t=>{t.expense&&et.set(t.id)}]}const lt=class extends U{constructor(t){super(),P(this,t,it,ct,s,{currency:2})}};function at(e){let n,r,s,c,i,l,a,u,d,f,h,p,b;return{c(){n=y("div"),r=v("Show "),s=v(e[1]),c=v("'s:\n    "),i=y("button"),l=v("Transactions"),u=w(),d=y("button"),f=v("Expenses"),k(i,"class",a=e[0]?ut:dt),k(d,"class",h=e[0]?dt:ut),k(n,"class","col-md-8 col-sm-12 mt-2 text-sm-start text-md-end")},m(t,o){$(t,n,o),m(n,r),m(n,s),m(n,c),m(n,i),m(i,l),m(n,u),m(n,d),m(d,f),p||(b=[_(i,"click",e[2]),_(d,"click",e[3])],p=!0)},p(t,[e]){1&e&&a!==(a=t[0]?ut:dt)&&k(i,"class",a),1&e&&h!==(h=t[0]?dt:ut)&&k(d,"class",h)},i:t,o:t,d(t){t&&g(n),p=!1,o(b)}}}const ut="ms-1 btn btn-primary btn-sm",dt="ms-1 btn btn-outline-secondary btn-sm";function ft(t,e,n){let o;u(t,V,(t=>n(0,o=t)));const r=(new Date).toLocaleString("default",{month:"long"});return[o,r,()=>V.set(!0),()=>V.set(!1)]}const ht=class extends U{constructor(t){super(),P(this,t,ft,at,s,{})}};function pt(e){let n,o,r,s;return{c(){n=y("div"),o=y("input"),k(o,"class","form-control"),k(o,"placeholder","Search transactions..."),k(o,"type","search"),k(o,"name","search"),k(o,"id","search"),k(n,"class","col-md-4 col-sm-12 mt-2")},m(t,c){$(t,n,c),m(n,o),C(o,e[0]),r||(s=_(o,"input",e[1]),r=!0)},p(t,[e]){1&e&&o.value!==t[0]&&C(o,t[0])},i:t,o:t,d(t){t&&g(n),r=!1,s()}}}function mt(t,e,n){let o;return u(t,Z,(t=>n(0,o=t))),[o,function(){o=this.value,Z.set(o)}]}const $t=class extends U{constructor(t){super(),P(this,t,mt,pt,s,{})}};function gt(t,e,n){const o=t.slice();return o[3]=e[n],o}function bt(t){let e,n,o,r,s,c,i,l,a,u,d,f,h,p,x,_,C,M,S,A,O,L,N,T,B,D,I=t[1].description+"",F=t[1].account+"",z=t[1].amount+"",H=t[1].category+"",q=nt(t[1].created_at)+"",J=t[1].images,j=[];for(let e=0;e<J.length;e+=1)j[e]=yt(gt(t,J,e));return{c(){e=y("h1"),n=v(I),o=w(),r=y("p"),s=y("b"),s.textContent="Account:",c=v(" "),i=v(F),l=w(),a=y("p"),u=y("b"),u.textContent="Amount:",d=v(" "),f=v(t[0]),h=w(),p=v(z),x=w(),_=y("p"),C=y("b"),C.textContent="Category:",M=v(" "),S=v(H),A=w(),O=y("p"),L=y("b"),L.textContent="Created at:",N=v(" "),T=v(q),B=w();for(let t=0;t<j.length;t+=1)j[t].c();D=v(""),k(e,"class","modal-title fs-5 mb-3"),k(e,"id","expense-modal-label")},m(t,g){$(t,e,g),m(e,n),$(t,o,g),$(t,r,g),m(r,s),m(r,c),m(r,i),$(t,l,g),$(t,a,g),m(a,u),m(a,d),m(a,f),m(a,h),m(a,p),$(t,x,g),$(t,_,g),m(_,C),m(_,M),m(_,S),$(t,A,g),$(t,O,g),m(O,L),m(O,N),m(O,T),$(t,B,g);for(let e=0;e<j.length;e+=1)j[e]&&j[e].m(t,g);$(t,D,g)},p(t,e){if(2&e&&I!==(I=t[1].description+"")&&E(n,I),2&e&&F!==(F=t[1].account+"")&&E(i,F),1&e&&E(f,t[0]),2&e&&z!==(z=t[1].amount+"")&&E(p,z),2&e&&H!==(H=t[1].category+"")&&E(S,H),2&e&&q!==(q=nt(t[1].created_at)+"")&&E(T,q),2&e){let n;for(J=t[1].images,n=0;n<J.length;n+=1){const o=gt(t,J,n);j[n]?j[n].p(o,e):(j[n]=yt(o),j[n].c(),j[n].m(D.parentNode,D))}for(;n<j.length;n+=1)j[n].d(1);j.length=J.length}},d(t){t&&g(e),t&&g(o),t&&g(r),t&&g(l),t&&g(a),t&&g(x),t&&g(_),t&&g(A),t&&g(O),t&&g(B),b(j,t),t&&g(D)}}}function yt(t){let e,n;return{c(){e=y("img"),k(e,"class","img-thumbnail mb-2"),i(e.src,n=t[3])||k(e,"src",n),k(e,"alt","Expenses attachment")},m(t,n){$(t,e,n)},p(t,o){2&o&&!i(e.src,n=t[3])&&k(e,"src",n)},d(t){t&&g(e)}}}function xt(e){let n,o,r,s,c,i,l=e[1]&&bt(e);return{c(){n=y("div"),o=y("div"),r=y("div"),s=y("div"),l&&l.c(),c=w(),i=y("button"),i.textContent="Close",k(i,"type","button"),k(i,"class","text-end btn btn-secondary"),k(i,"data-bs-dismiss","modal"),k(s,"class","modal-body"),k(r,"class","modal-content"),k(o,"class","modal-dialog modal-dialog-centered"),k(n,"class","modal fade"),k(n,"id","expense-modal"),k(n,"tabindex","-1")},m(t,e){$(t,n,e),m(n,o),m(o,r),m(r,s),l&&l.m(s,null),m(s,c),m(s,i)},p(t,[e]){t[1]?l?l.p(t,e):(l=bt(t),l.c(),l.m(s,c)):l&&(l.d(1),l=null)},i:t,o:t,d(t){t&&g(n),l&&l.d()}}}function vt(t,e,n){let{currency:o=""}=e,r=null;var s;return s=et.subscribe((t=>{if(n(1,r={action:"",description:"",account:"",amount:0,category:"",id:"",created_at:"",images:[]}),t){const e=new XMLHttpRequest;e.onreadystatechange=function(){e.readyState==XMLHttpRequest.DONE&&n(1,r=JSON.parse(e.responseText))},e.open("GET",`/expenses/detail/${t}`),e.send()}})),function(){if(!h)throw new Error("Function called outside component initialization");return h}().$$.on_destroy.push(s),t.$$set=t=>{"currency"in t&&n(0,o=t.currency)},[o,r]}const wt=class extends U{constructor(t){super(),P(this,t,vt,xt,s,{currency:0})}};function _t(t){let e,n;return e=new ht({}),{c(){W(e.$$.fragment)},m(t,o){X(e,t,o),n=!0},i(t){n||(j(e.$$.fragment,t),n=!0)},o(t){R(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function kt(t){let e,n,r,s,c,i,l,a,u,d,f;r=new $t({});let h=!t[1]&&_t();return a=new lt({props:{currency:t[0]}}),d=new wt({props:{currency:t[0]}}),{c(){e=y("div"),n=y("div"),W(r.$$.fragment),s=w(),h&&h.c(),c=w(),i=y("hr"),l=w(),W(a.$$.fragment),u=w(),W(d.$$.fragment),k(n,"class","row pt-2 px-3"),k(e,"class","card")},m(t,o){$(t,e,o),m(e,n),X(r,n,null),m(n,s),h&&h.m(n,null),m(e,c),m(e,i),m(e,l),X(a,e,null),m(e,u),X(d,e,null),f=!0},p(t,[e]){t[1]?h&&(q={r:0,c:[],p:q},R(h,1,1,(()=>{h=null})),q.r||o(q.c),q=q.p):h?2&e&&j(h,1):(h=_t(),h.c(),j(h,1),h.m(n,null));const r={};1&e&&(r.currency=t[0]),a.$set(r);const s={};1&e&&(s.currency=t[0]),d.$set(s)},i(t){f||(j(r.$$.fragment,t),j(h),j(a.$$.fragment,t),j(d.$$.fragment,t),f=!0)},o(t){R(r.$$.fragment,t),R(h),R(a.$$.fragment,t),R(d.$$.fragment,t),f=!1},d(t){t&&g(e),G(r),h&&h.d(),G(a),G(d)}}}function Et(t,e,n){let{currency:o="MYR"}=e,{hideFilter:r=!1}=e;return t.$$set=t=>{"currency"in t&&n(0,o=t.currency),"hideFilter"in t&&n(1,r=t.hideFilter)},[o,r]}const Ct=JSON.parse(document.getElementById("transaction-data").textContent)||[];Q.set(Ct);const Mt=document.getElementById("user-currency").textContent,St=document.getElementById("hide-filter")&&"true"===document.getElementById("hide-filter").textContent;new class extends U{constructor(t){super(),P(this,t,Et,kt,s,{currency:0,hideFilter:1})}}({target:document.getElementById("transactions"),props:{currency:Mt,hideFilter:St}})})();