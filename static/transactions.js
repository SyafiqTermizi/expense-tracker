(()=>{"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t){return 0===Object.keys(t).length}function i(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function l(t,e,n){t.$$.on_destroy.push(i(e,n))}new Set;const u="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;class a{constructor(t){this.options=t,this._listeners="WeakMap"in u?new WeakMap:void 0}observe(t,e){return this._listeners.set(t,e),this._getObserver().observe(t,this.options),()=>{this._listeners.delete(t),this._observer.unobserve(t)}}_getObserver(){var t;return null!==(t=this._observer)&&void 0!==t?t:this._observer=new ResizeObserver((t=>{var e;for(const n of t)a.entries.set(n.target,n),null===(e=this._listeners.get(n.target))||void 0===e||e(n)}))}}a.entries="WeakMap"in u?new WeakMap:void 0;let d,f=!1;function h(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function m(t){t.parentNode&&t.parentNode.removeChild(t)}function $(t){return document.createElement(t)}function g(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function b(t){return document.createTextNode(t)}function y(){return b(" ")}function v(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t,e){e=""+e,t.data!==e&&(t.data=e)}function _(t,e){t.value=null==e?"":e}function k(t){d=t}new Map;const E=[],M=[];let S=[];const C=[],A=Promise.resolve();let O=!1;function B(t){S.push(t)}const I=new Set;let L=0;function T(){if(0!==L)return;const t=d;do{try{for(;L<E.length;){const t=E[L];L++,k(t),D(t.$$)}}catch(t){throw E.length=0,L=0,t}for(k(null),E.length=0,L=0;M.length;)M.pop()();for(let t=0;t<S.length;t+=1){const e=S[t];I.has(e)||(I.add(e),e())}S.length=0}while(E.length);for(;C.length;)C.pop()();O=!1,I.clear(),k(t)}function D(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(B)}}const N=new Set;let F,z;function j(t,e){t&&t.i&&(N.delete(t),t.i(e))}function H(t,e,n,o){if(t&&t.o){if(N.has(t))return;N.add(t),F.c.push((()=>{N.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function J(t){t&&t.c()}function W(t,n,s,c){const{fragment:i,after_update:l}=t.$$;i&&i.m(n,s),c||B((()=>{const n=t.$$.on_mount.map(e).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),l.forEach(B)}function q(t,e){const n=t.$$;null!==n.fragment&&(function(t){const e=[],n=[];S.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),S=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function R(e,r,s,c,i,l,u,a=[-1]){const h=d;k(e);const p=e.$$={fragment:null,ctx:[],props:l,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(h?h.$$.context:[])),callbacks:n(),dirty:a,skip_bound:!1,root:r.target||h.$$.root};u&&u(p.root);let $=!1;if(p.ctx=s?s(e,r.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),$&&function(t,e){-1===t.$$.dirty[0]&&(E.push(t),O||(O=!0,A.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],p.update(),$=!0,o(p.before_update),p.fragment=!!c&&c(p.ctx),r.target){if(r.hydrate){f=!0;const t=(g=r.target,Array.from(g.childNodes));p.fragment&&p.fragment.l(t),t.forEach(m)}else p.fragment&&p.fragment.c();r.intro&&j(e.$$.fragment),W(e,r.target,r.anchor,r.customElement),f=!1,T()}var g;k(h)}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(z=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(r);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){o(this.$$.on_disconnect)}$destroy(){q(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){this.$$set&&!c(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class P{$destroy(){q(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){this.$$set&&!c(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const U=[];function Y(e,n=t){let o;const r=new Set;function c(t){if(s(e,t)&&(e=t,o)){const t=!U.length;for(const t of r)t[1](),U.push(t,e);if(t){for(let t=0;t<U.length;t+=2)U[t][0](U[t+1]);U.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(s,i=t){const l=[s,i];return r.add(l),1===r.size&&(o=n(c)||t),s(e),()=>{r.delete(l),0===r.size&&o&&(o(),o=null)}}}}const G=Y([]),K=Y(!0),Q=Y(""),V=function(e,n,s){const c=!Array.isArray(e),l=c?[e]:e,u=n.length<2;return{subscribe:Y(void 0,(e=>{let s=!1;const a=[];let d=0,f=t;const h=()=>{if(d)return;f();const o=n(c?a[0]:a);u?e(o):f=r(o)?o:t},p=l.map(((t,e)=>i(t,(t=>{a[e]=t,d&=~(1<<e),s&&h()}),(()=>{d|=1<<e}))));return s=!0,h(),function(){o(p),f(),s=!1}})).subscribe}}([K,Q,G],(([t,e,n])=>{let o=[];return o=t?n:n.filter((t=>t.expense)),e&&(o=o.filter((t=>t.description.toLowerCase().includes(e.toLowerCase())))),o}));function X(t){const e=new Date(t).toLocaleDateString().split("/"),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(e[0])-1];return`${e[1]} ${n}`}function Z(t,e,n){const o=t.slice();return o[3]=e[n],o}function tt(t){let e,n,o,r,s,c;return{c(){e=g("svg"),n=g("path"),o=g("path"),r=g("path"),s=g("path"),c=g("path"),w(n,"stroke","none"),w(n,"d","M0 0h24v24H0z"),w(n,"fill","none"),w(o,"d","M14 3v4a1 1 0 0 0 1 1h4"),w(r,"d","M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"),w(s,"d","M9 17h6"),w(c,"d","M9 13h6"),w(e,"xmlns","http://www.w3.org/2000/svg"),w(e,"class","text-primary"),w(e,"width","12"),w(e,"height","12"),w(e,"viewBox","0 0 24 24"),w(e,"stroke-width","2"),w(e,"stroke","currentColor"),w(e,"fill","none"),w(e,"stroke-linecap","round"),w(e,"stroke-linejoin","round")},m(t,i){p(t,e,i),h(e,n),h(e,o),h(e,r),h(e,s),h(e,c)},d(t){t&&m(e)}}}function et(t){let e,n,o,r,s,c,i,l,u,a,d,f,g,v,_,k,E=t[3].description+"",M=t[1].format(t[3].amount)+"",S=t[3].account+"",C=X(t[3].created_at)+"",A=t[3].expense&&tt();return{c(){e=$("tr"),n=$("td"),o=b(E),r=y(),A&&A.c(),c=y(),i=$("td"),l=b(M),a=y(),d=$("td"),f=b(S),g=y(),v=$("td"),_=b(C),k=y(),w(n,"data-bs-toggle","modal"),w(n,"data-bs-target",s="#expense-modal-"+t[3].uid),w(i,"class",u="DEBIT"===t[3].action?"text-danger":"text-success")},m(t,s){p(t,e,s),h(e,n),h(n,o),h(n,r),A&&A.m(n,null),h(e,c),h(e,i),h(i,l),h(e,a),h(e,d),h(d,f),h(e,g),h(e,v),h(v,_),h(e,k)},p(t,e){1&e&&E!==(E=t[3].description+"")&&x(o,E),t[3].expense?A||(A=tt(),A.c(),A.m(n,null)):A&&(A.d(1),A=null),1&e&&s!==(s="#expense-modal-"+t[3].uid)&&w(n,"data-bs-target",s),1&e&&M!==(M=t[1].format(t[3].amount)+"")&&x(l,M),1&e&&u!==(u="DEBIT"===t[3].action?"text-danger":"text-success")&&w(i,"class",u),1&e&&S!==(S=t[3].account+"")&&x(f,S),1&e&&C!==(C=X(t[3].created_at)+"")&&x(_,C)},d(t){t&&m(e),A&&A.d()}}}function nt(e){let n,o,r,s,c,i=e[0],l=[];for(let t=0;t<i.length;t+=1)l[t]=et(Z(e,i,t));return{c(){n=$("div"),o=$("table"),r=$("thead"),r.innerHTML='<tr><th scope="col">Description</th> \n                <th scope="col">Amount</th> \n                <th scope="col">Account</th> \n                <th scope="col">Date</th></tr>',s=y(),c=$("tbody");for(let t=0;t<l.length;t+=1)l[t].c();w(o,"class","table table-hover"),w(n,"class","card-body")},m(t,e){p(t,n,e),h(n,o),h(o,r),h(o,s),h(o,c);for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(c,null)},p(t,[e]){if(3&e){let n;for(i=t[0],n=0;n<i.length;n+=1){const o=Z(t,i,n);l[n]?l[n].p(o,e):(l[n]=et(o),l[n].c(),l[n].m(c,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=i.length}},i:t,o:t,d(t){t&&m(n),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(l,t)}}}function ot(t,e,n){let o;l(t,V,(t=>n(0,o=t)));let{currency:r=""}=e;const s=new Intl.NumberFormat("en-US",{style:"currency",currency:r});return t.$$set=t=>{"currency"in t&&n(2,r=t.currency)},[o,s,r]}const rt=class extends P{constructor(t){super(),R(this,t,ot,nt,s,{currency:2})}};function st(e){let n,r,s,c,i,l,u,a,d,f,g,x,_;return{c(){n=$("div"),r=b("Show "),s=b(e[1]),c=b("'s:\n    "),i=$("button"),l=b("Transactions"),a=y(),d=$("button"),f=b("Expenses"),w(i,"class",u=e[0]?ct:it),w(d,"class",g=e[0]?it:ct),w(n,"class","col-md-8 col-sm-12 mt-2 text-sm-start text-md-end")},m(t,o){p(t,n,o),h(n,r),h(n,s),h(n,c),h(n,i),h(i,l),h(n,a),h(n,d),h(d,f),x||(_=[v(i,"click",e[2]),v(d,"click",e[3])],x=!0)},p(t,[e]){1&e&&u!==(u=t[0]?ct:it)&&w(i,"class",u),1&e&&g!==(g=t[0]?it:ct)&&w(d,"class",g)},i:t,o:t,d(t){t&&m(n),x=!1,o(_)}}}const ct="ms-1 btn btn-primary btn-sm",it="ms-1 btn btn-outline-secondary btn-sm";function lt(t,e,n){let o;l(t,K,(t=>n(0,o=t)));const r=(new Date).toLocaleString("default",{month:"long"});return[o,r,()=>K.set(!0),()=>K.set(!1)]}const ut=class extends P{constructor(t){super(),R(this,t,lt,st,s,{})}};function at(e){let n,o,r,s;return{c(){n=$("div"),o=$("input"),w(o,"class","form-control"),w(o,"placeholder","Search transactions..."),w(o,"type","search"),w(o,"name","search"),w(o,"id","search"),w(n,"class","col-md-4 col-sm-12 mt-2")},m(t,c){p(t,n,c),h(n,o),_(o,e[0]),r||(s=v(o,"input",e[1]),r=!0)},p(t,[e]){1&e&&o.value!==t[0]&&_(o,t[0])},i:t,o:t,d(t){t&&m(n),r=!1,s()}}}function dt(t,e,n){let o;return l(t,Q,(t=>n(0,o=t))),[o,function(){o=this.value,Q.set(o)}]}const ft=class extends P{constructor(t){super(),R(this,t,dt,at,s,{})}};function ht(t){let e,n;return e=new ut({}),{c(){J(e.$$.fragment)},m(t,o){W(e,t,o),n=!0},i(t){n||(j(e.$$.fragment,t),n=!0)},o(t){H(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function pt(t){let e,n,r,s,c,i,l,u,a;r=new ft({});let d=!t[1]&&ht();return u=new rt({props:{currency:t[0]}}),{c(){e=$("div"),n=$("div"),J(r.$$.fragment),s=y(),d&&d.c(),c=y(),i=$("hr"),l=y(),J(u.$$.fragment),w(n,"class","row pt-2 px-3"),w(e,"class","card")},m(t,o){p(t,e,o),h(e,n),W(r,n,null),h(n,s),d&&d.m(n,null),h(e,c),h(e,i),h(e,l),W(u,e,null),a=!0},p(t,[e]){t[1]?d&&(F={r:0,c:[],p:F},H(d,1,1,(()=>{d=null})),F.r||o(F.c),F=F.p):d?2&e&&j(d,1):(d=ht(),d.c(),j(d,1),d.m(n,null));const r={};1&e&&(r.currency=t[0]),u.$set(r)},i(t){a||(j(r.$$.fragment,t),j(d),j(u.$$.fragment,t),a=!0)},o(t){H(r.$$.fragment,t),H(d),H(u.$$.fragment,t),a=!1},d(t){t&&m(e),q(r),d&&d.d(),q(u)}}}function mt(t,e,n){let{currency:o="MYR"}=e,{hideFilter:r=!1}=e;return t.$$set=t=>{"currency"in t&&n(0,o=t.currency),"hideFilter"in t&&n(1,r=t.hideFilter)},[o,r]}const $t=JSON.parse(document.getElementById("transaction-data").textContent)||[];G.set($t);const gt=document.getElementById("user-currency").textContent,bt=document.getElementById("hide-filter")&&"true"===document.getElementById("hide-filter").textContent;new class extends P{constructor(t){super(),R(this,t,mt,pt,s,{currency:0,hideFilter:1})}}({target:document.getElementById("transactions"),props:{currency:gt,hideFilter:bt}})})();