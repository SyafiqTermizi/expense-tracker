(()=>{"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function c(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let s;function l(e,t){return s||(s=document.createElement("a")),s.href=t,e===s.href}function u(e){return 0===Object.keys(e).length}new Set;const i="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;class a{constructor(e){this.options=e,this._listeners="WeakMap"in i?new WeakMap:void 0}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return null!==(e=this._observer)&&void 0!==e?e:this._observer=new ResizeObserver((e=>{var t;for(const n of e)a.entries.set(n.target,n),null===(t=this._listeners.get(n.target))||void 0===t||t(n)}))}}a.entries="WeakMap"in i?new WeakMap:void 0;let d,f=!1;function p(e,t){e.appendChild(t)}function m(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function g(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function $(e){return document.createElement(e)}function b(e){return document.createTextNode(e)}function v(){return b(" ")}function y(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function _(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e){return""===e?null:+e}function w(e,t){t=""+t,e.data!==t&&(e.data=t)}function C(e,t){e.value=null==t?"":t}function k(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function E(e,t,n){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function B(e,t,n){e.classList[n?"add":"remove"](t)}function A(e){d=e}new Map;const O=[],M=[];let N=[];const S=[],L=Promise.resolve();let I=!1;function T(e){N.push(e)}function j(e){S.push(e)}const q=new Set;let R=0;function W(){if(0!==R)return;const e=d;do{try{for(;R<O.length;){const e=O[R];R++,A(e),D(e.$$)}}catch(e){throw O.length=0,R=0,e}for(A(null),O.length=0,R=0;M.length;)M.pop()();for(let e=0;e<N.length;e+=1){const t=N[e];q.has(t)||(q.add(t),t())}N.length=0}while(O.length);for(;S.length;)S.pop()();I=!1,q.clear(),A(e)}function D(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(T)}}const H=new Set;let P,U;function J(e,t){e&&e.i&&(H.delete(e),e.i(t))}function z(e,t,n,o){if(e&&e.o){if(H.has(e))return;H.add(e),P.c.push((()=>{H.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function F(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function G(e){e&&e.c()}function K(e,n,r,s){const{fragment:l,after_update:u}=e.$$;l&&l.m(n,r),s||T((()=>{const n=e.$$.on_mount.map(t).filter(c);e.$$.on_destroy?e.$$.on_destroy.push(...n):o(n),e.$$.on_mount=[]})),u.forEach(T)}function Q(e,t){const n=e.$$;null!==n.fragment&&(function(e){const t=[],n=[];N.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),N=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,c,r,s,l,u,i,a=[-1]){const p=d;A(t);const m=t.$$={fragment:null,ctx:[],props:u,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(p?p.$$.context:[])),callbacks:n(),dirty:a,skip_bound:!1,root:c.target||p.$$.root};i&&i(m.root);let g=!1;if(m.ctx=r?r(t,c.props||{},((e,n,...o)=>{const c=o.length?o[0]:n;return m.ctx&&l(m.ctx[e],m.ctx[e]=c)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](c),g&&function(e,t){-1===e.$$.dirty[0]&&(O.push(e),I||(I=!0,L.then(W)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],m.update(),g=!0,o(m.before_update),m.fragment=!!s&&s(m.ctx),c.target){if(c.hydrate){f=!0;const e=($=c.target,Array.from($.childNodes));m.fragment&&m.fragment.l(e),e.forEach(h)}else m.fragment&&m.fragment.c();c.intro&&J(t.$$.fragment),K(t,c.target,c.anchor,c.customElement),f=!1,W()}var $;A(p)}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(U=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(t).filter(c);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){o(this.$$.on_disconnect)}$destroy(){Q(this,1),this.$destroy=e}$on(t,n){if(!c(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){this.$$set&&!u(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class X{$destroy(){Q(this,1),this.$destroy=e}$on(t,n){if(!c(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){this.$$set&&!u(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Y(e){!function(e,t,n){const o=function(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}(e);if(!o.getElementById(t)){const e=$("style");e.id=t,e.textContent="#dropdown-button.svelte-1r3up0i{border-color:#dee2e6;text-align:left}#dropdown-button.svelte-1r3up0i:hover{background-color:white;color:black}",function(e,t){p(e.head||e,t),t.sheet}(o,e)}}(e,"svelte-1r3up0i")}function Z(e,t,n){const o=e.slice();return o[6]=t[n].slug,o[7]=t[n].name,o[8]=t[n].balance,o}function ee(t){let n;return{c(){n=b("Select an account")},m(e,t){m(e,n,t)},p:e,d(e){e&&h(n)}}}function te(e){let t,n=e[1].find(e[4]).name+"";return{c(){t=b(n)},m(e,n){m(e,t,n)},p(e,o){3&o&&n!==(n=e[1].find(e[4]).name+"")&&w(t,n)},d(e){e&&h(t)}}}function ne(e){let t,n,o,c,r,s,l,u,i,a,d=e[7]+"",f=e[8]+"";function g(){return e[5](e[6])}return{c(){t=$("li"),n=$("button"),o=b(d),c=b(" - balance: "),r=b(e[2]),s=v(),l=b(f),u=v(),_(n,"class","dropdown-item")},m(e,d){m(e,t,d),p(t,n),p(n,o),p(n,c),p(n,r),p(n,s),p(n,l),p(t,u),i||(a=y(n,"click",g),i=!0)},p(t,n){e=t,2&n&&d!==(d=e[7]+"")&&w(o,d),4&n&&w(r,e[2]),2&n&&f!==(f=e[8]+"")&&w(l,f)},d(e){e&&h(t),i=!1,a()}}}function oe(t){let n,o,c,r;function s(e,t){return e[0]?te:ee}let l=s(t),u=l(t),i=t[1],a=[];for(let e=0;e<i.length;e+=1)a[e]=ne(Z(t,i,e));return{c(){n=$("div"),o=$("button"),u.c(),c=v(),r=$("ul");for(let e=0;e<a.length;e+=1)a[e].c();_(o,"id","dropdown-button"),_(o,"class","text-left btn btn-outline-dark dropdown-toggle svelte-1r3up0i"),_(o,"type","button"),_(o,"data-bs-toggle","dropdown"),_(r,"class","dropdown-menu"),_(n,"class","dropdown d-grid gap-2")},m(e,t){m(e,n,t),p(n,o),u.m(o,null),p(n,c),p(n,r);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(r,null)},p(e,[t]){if(l===(l=s(e))&&u?u.p(e,t):(u.d(1),u=l(e),u&&(u.c(),u.m(o,null))),14&t){let n;for(i=e[1],n=0;n<i.length;n+=1){const o=Z(e,i,n);a[n]?a[n].p(o,t):(a[n]=ne(o),a[n].c(),a[n].m(r,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}},i:e,o:e,d(e){e&&h(n),u.d(),g(a,e)}}}function ce(e,t,n){let{accountBalances:o}=t,{userCurrency:c=""}=t,{selectedAccount:r=null}=t;function s(e){n(0,r=e)}return e.$$set=e=>{"accountBalances"in e&&n(1,o=e.accountBalances),"userCurrency"in e&&n(2,c=e.userCurrency),"selectedAccount"in e&&n(0,r=e.selectedAccount)},[r,o,c,s,e=>e.slug==r,e=>s(e)]}const re=class extends X{constructor(e){super(),V(this,e,ce,oe,r,{accountBalances:1,userCurrency:2,selectedAccount:0},Y)}};function se(t){let n,o,c;return{c(){n=$("button"),n.textContent="Clear",_(n,"class","btn btn-outline-secondary"),_(n,"type","button")},m(e,r){m(e,n,r),o||(c=y(n,"click",t[6]),o=!0)},p:e,d(e){e&&h(n),o=!1,c()}}}function le(e){let t,n,o,c;return{c(){t=$("div"),t.textContent="Upload new image to replace current image",n=v(),o=$("img"),_(t,"class","mb-2 form-text"),_(o,"class","img-thumbnail mb-2"),l(o.src,c=e[1])||_(o,"src",c),_(o,"alt","Expenses attachment"),k(o,"object-fit","cover"),k(o,"width","100px"),k(o,"height","100px")},m(e,c){m(e,t,c),m(e,n,c),m(e,o,c)},p(e,t){2&t&&!l(o.src,c=e[1])&&_(o,"src",c)},d(e){e&&h(t),e&&h(n),e&&h(o)}}}function ue(t){let n,c,r,s,l,u,i,a=t[0]&&se(t),d=t[0]&&le(t);return{c(){n=$("div"),c=$("input"),r=v(),a&&a.c(),s=v(),d&&d.c(),l=b(""),_(c,"class","form-control"),_(c,"type","file"),_(c,"name","image"),_(c,"accept","image/*"),_(n,"class","mb-2"),B(n,"input-group",t[0])},m(e,o){m(e,n,o),p(n,c),t[5](c),p(n,r),a&&a.m(n,null),m(e,s,o),d&&d.m(e,o),m(e,l,o),u||(i=[y(c,"change",t[4]),y(c,"change",t[3])],u=!0)},p(e,[t]){e[0]?a?a.p(e,t):(a=se(e),a.c(),a.m(n,null)):a&&(a.d(1),a=null),1&t&&B(n,"input-group",e[0]),e[0]?d?d.p(e,t):(d=le(e),d.c(),d.m(l.parentNode,l)):d&&(d.d(1),d=null)},i:e,o:e,d(e){e&&h(n),t[5](null),a&&a.d(),e&&h(s),d&&d.d(e),e&&h(l),u=!1,o(i)}}}function ie(e,t,n){let o,{images:c}=t,r="";return e.$$set=e=>{"images"in e&&n(0,c=e.images)},[c,r,o,function(){const[e]=c;e&&n(1,r=URL.createObjectURL(e))},function(){c=this.files,n(0,c)},function(e){M[e?"unshift":"push"]((()=>{o=e,n(2,o)}))},()=>{n(0,c=null),n(2,o.value="",o),n(1,r="")}]}const ae=class extends X{constructor(e){super(),V(this,e,ie,ue,r,{images:0})}};function de(e,t,n){const o=e.slice();return o[7]=t[n],o}function fe(e){let t,n,o,c,r=e[7].name+"";return{c(){t=$("option"),n=b(r),o=v(),t.__value=c=e[7].slug,t.value=t.__value},m(e,c){m(e,t,c),p(t,n),p(t,o)},p(e,o){4&o&&r!==(r=e[7].name+"")&&w(n,r),4&o&&c!==(c=e[7].slug)&&(t.__value=c,t.value=t.__value)},d(e){e&&h(t)}}}function pe(e){let t,n,c,r,s,l,u,i,a,d,f,k,B,A,O,N,S,L,I,q,R,W,D,H,P,U,V,X,Y,Z,ee,te,ne,oe,ce,se;function le(t){e[8](t)}let ue={accountBalances:e[0],userCurrency:e[1]};void 0!==e[3]&&(ue.selectedAccount=e[3]),s=new re({props:ue}),M.push((()=>F(s,"selectedAccount",le)));let ie=e[2],pe=[];for(let t=0;t<ie.length;t+=1)pe[t]=fe(de(e,ie,t));function me(t){e[12](t)}let he={};return void 0!==e[6]&&(he.images=e[6]),te=new ae({props:he}),M.push((()=>F(te,"images",me))),{c(){t=$("div"),n=$("div"),c=$("label"),c.textContent="From Account:",r=v(),G(s.$$.fragment),u=v(),i=$("div"),a=$("label"),d=b("Amount ("),f=b(e[1]),k=b("):"),B=v(),A=$("input"),O=v(),N=$("div"),S=$("label"),S.textContent="Description:",L=v(),I=$("input"),q=v(),R=$("div"),W=$("label"),W.textContent="category:",D=v(),H=$("select"),P=$("option"),P.textContent="----";for(let e=0;e<pe.length;e+=1)pe[e].c();U=v(),V=$("div"),V.innerHTML='<div class="col-6"></div> \n            <div class="col-6 text-end"><p><a class="card-link" href="/expenses/categories/add?next=/expenses/add">Add new category</a></p></div>',X=v(),Y=$("div"),Z=$("label"),Z.textContent="Image:",ee=v(),G(te.$$.fragment),_(c,"for","id_from_account"),_(c,"class","form-label"),_(n,"class","mb-3"),_(a,"class","form-label"),_(a,"for","id_amount"),_(A,"class","form-control"),_(A,"type","number"),_(A,"name","amount"),_(A,"step","0.01"),A.required=!0,_(A,"id","id_amount"),_(i,"class","mb-3"),_(S,"class","form-label"),_(S,"for","id_description"),_(I,"class","form-control"),_(I,"type","text"),_(I,"name","description"),_(I,"maxlength","255"),_(I,"id","id_description"),_(N,"class","mb-3"),_(W,"class","form-label"),_(W,"for","id_category"),P.__value="",P.value=P.__value,_(H,"class","form-select"),_(H,"name","category"),_(H,"id","id_category"),void 0===e[7]&&T((()=>e[11].call(H))),_(V,"class","row"),_(Z,"class","form-label"),_(Z,"for","id_image"),_(Y,"class","mb-3"),_(t,"class","card-body p-4")},m(o,l){m(o,t,l),p(t,n),p(n,c),p(n,r),K(s,n,null),p(t,u),p(t,i),p(i,a),p(a,d),p(a,f),p(a,k),p(i,B),p(i,A),C(A,e[4]),p(t,O),p(t,N),p(N,S),p(N,L),p(N,I),C(I,e[5]),p(t,q),p(t,R),p(R,W),p(R,D),p(R,H),p(H,P);for(let e=0;e<pe.length;e+=1)pe[e]&&pe[e].m(H,null);E(H,e[7],!0),p(R,U),p(R,V),p(t,X),p(t,Y),p(Y,Z),p(Y,ee),K(te,Y,null),oe=!0,ce||(se=[y(A,"input",e[9]),y(I,"input",e[10]),y(H,"change",e[11])],ce=!0)},p(e,[t]){const n={};if(1&t&&(n.accountBalances=e[0]),2&t&&(n.userCurrency=e[1]),!l&&8&t&&(l=!0,n.selectedAccount=e[3],j((()=>l=!1))),s.$set(n),(!oe||2&t)&&w(f,e[1]),16&t&&x(A.value)!==e[4]&&C(A,e[4]),32&t&&I.value!==e[5]&&C(I,e[5]),4&t){let n;for(ie=e[2],n=0;n<ie.length;n+=1){const o=de(e,ie,n);pe[n]?pe[n].p(o,t):(pe[n]=fe(o),pe[n].c(),pe[n].m(H,null))}for(;n<pe.length;n+=1)pe[n].d(1);pe.length=ie.length}132&t&&E(H,e[7]);const o={};!ne&&64&t&&(ne=!0,o.images=e[6],j((()=>ne=!1))),te.$set(o)},i(e){oe||(J(s.$$.fragment,e),J(te.$$.fragment,e),oe=!0)},o(e){z(s.$$.fragment,e),z(te.$$.fragment,e),oe=!1},d(e){e&&h(t),Q(s),g(pe,e),Q(te),ce=!1,o(se)}}}function me(e,t,n){let o,c,r,s,{accountBalances:l}=t,{userCurrency:u=""}=t,{expenseCategories:i=[]}=t,a="";return e.$$set=e=>{"accountBalances"in e&&n(0,l=e.accountBalances),"userCurrency"in e&&n(1,u=e.userCurrency),"expenseCategories"in e&&n(2,i=e.expenseCategories)},[l,u,i,a,o,c,s,r,function(e){a=e,n(3,a)},function(){o=x(this.value),n(4,o)},function(){c=this.value,n(5,c)},function(){r=function(e){const t=e.querySelector(":checked");return t&&t.__value}(this),n(7,r),n(2,i)},function(e){s=e,n(6,s)}]}const he=document.getElementById("user-currency").textContent,ge=JSON.parse(document.getElementById("account-balances").textContent),$e=JSON.parse(document.getElementById("expense-categories").textContent);new class extends X{constructor(e){super(),V(this,e,me,pe,r,{accountBalances:0,userCurrency:1,expenseCategories:2})}}({target:document.getElementById("form"),props:{accountBalances:ge,userCurrency:he,expenseCategories:$e}})})();
