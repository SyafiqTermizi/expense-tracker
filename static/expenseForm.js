(()=>{"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function s(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let c;function l(e,t){return c||(c=document.createElement("a")),c.href=t,e===c.href}function i(e){return 0===Object.keys(e).length}new Set;const a="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;class u{constructor(e){this.options=e,this._listeners="WeakMap"in a?new WeakMap:void 0}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return null!==(e=this._observer)&&void 0!==e?e:this._observer=new ResizeObserver((e=>{var t;for(const n of e)u.entries.set(n.target,n),null===(t=this._listeners.get(n.target))||void 0===t||t(n)}))}}u.entries="WeakMap"in a?new WeakMap:void 0;let d,p=!1;function f(e,t){e.appendChild(t)}function m(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function g(e){return document.createElement(e)}function $(e){return document.createTextNode(e)}function b(){return $(" ")}function y(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function v(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e){return""===e?null:+e}function _(e,t){t=""+t,e.data!==t&&(e.data=t)}function w(e,t){e.value=null==t?"":t}function C(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function k(e,t,n){e.classList[n?"add":"remove"](t)}function E(e){d=e}new Map;const B=[],O=[];let D=[];const V=[],M=Promise.resolve();let N=!1;function S(e){D.push(e)}function L(e){V.push(e)}const A=new Set;let I=0;function T(){if(0!==I)return;const e=d;do{try{for(;I<B.length;){const e=B[I];I++,E(e),j(e.$$)}}catch(e){throw B.length=0,I=0,e}for(E(null),B.length=0,I=0;O.length;)O.pop()();for(let e=0;e<D.length;e+=1){const t=D[e];A.has(t)||(A.add(t),t())}D.length=0}while(B.length);for(;V.length;)V.pop()();N=!1,A.clear(),E(e)}function j(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(S)}}const R=new Set;let q,W;function H(e,t){e&&e.i&&(R.delete(e),e.i(t))}function P(e,t,n,o){if(e&&e.o){if(R.has(e))return;R.add(e),q.c.push((()=>{R.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function U(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function J(e){e&&e.c()}function z(e,n,r,c){const{fragment:l,after_update:i}=e.$$;l&&l.m(n,r),c||S((()=>{const n=e.$$.on_mount.map(t).filter(s);e.$$.on_destroy?e.$$.on_destroy.push(...n):o(n),e.$$.on_mount=[]})),i.forEach(S)}function F(e,t){const n=e.$$;null!==n.fragment&&(function(e){const t=[],n=[];D.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),D=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function G(t,s,r,c,l,i,a,u=[-1]){const f=d;E(t);const m=t.$$={fragment:null,ctx:[],props:i,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(f?f.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:s.target||f.$$.root};a&&a(m.root);let g=!1;if(m.ctx=r?r(t,s.props||{},((e,n,...o)=>{const s=o.length?o[0]:n;return m.ctx&&l(m.ctx[e],m.ctx[e]=s)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](s),g&&function(e,t){-1===e.$$.dirty[0]&&(B.push(e),N||(N=!0,M.then(T)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],m.update(),g=!0,o(m.before_update),m.fragment=!!c&&c(m.ctx),s.target){if(s.hydrate){p=!0;const e=($=s.target,Array.from($.childNodes));m.fragment&&m.fragment.l(e),e.forEach(h)}else m.fragment&&m.fragment.c();s.intro&&H(t.$$.fragment),z(t,s.target,s.anchor,s.customElement),p=!1,T()}var $;E(f)}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(W=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(t).filter(s);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){o(this.$$.on_disconnect)}$destroy(){F(this,1),this.$destroy=e}$on(t,n){if(!s(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){this.$$set&&!i(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class K{$destroy(){F(this,1),this.$destroy=e}$on(t,n){if(!s(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){this.$$set&&!i(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Q(e){!function(e,t,n){const o=function(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}(e);if(!o.getElementById(t)){const e=g("style");e.id=t,e.textContent="#dropdown-button.svelte-1r3up0i{border-color:#dee2e6;text-align:left}#dropdown-button.svelte-1r3up0i:hover{background-color:white;color:black}",function(e,t){f(e.head||e,t),t.sheet}(o,e)}}(e,"svelte-1r3up0i")}function X(e,t,n){const o=e.slice();return o[6]=t[n].value,o[7]=t[n].optionDisplay,o}function Y(e){let t;return{c(){t=$(e[1])},m(e,n){m(e,t,n)},p(e,n){2&n&&_(t,e[1])},d(e){e&&h(t)}}}function Z(e){let t,n=e[2].find(e[4]).selectedDisplay+"";return{c(){t=$(n)},m(e,n){m(e,t,n)},p(e,o){5&o&&n!==(n=e[2].find(e[4]).selectedDisplay+"")&&_(t,n)},d(e){e&&h(t)}}}function ee(e){let t,n,o,s,r,c,l=e[7]+"";function i(){return e[5](e[6])}return{c(){t=g("li"),n=g("button"),o=$(l),s=b(),v(n,"class","dropdown-item")},m(e,l){m(e,t,l),f(t,n),f(n,o),f(t,s),r||(c=y(n,"click",i),r=!0)},p(t,n){e=t,4&n&&l!==(l=e[7]+"")&&_(o,l)},d(e){e&&h(t),r=!1,c()}}}function te(t){let n,o,s,r;function c(e,t){return e[0]?Z:Y}let l=c(t),i=l(t),a=t[2],u=[];for(let e=0;e<a.length;e+=1)u[e]=ee(X(t,a,e));return{c(){n=g("div"),o=g("button"),i.c(),s=b(),r=g("ul");for(let e=0;e<u.length;e+=1)u[e].c();v(o,"id","dropdown-button"),v(o,"class","text-left btn btn-outline-dark dropdown-toggle svelte-1r3up0i"),v(o,"type","button"),v(o,"data-bs-toggle","dropdown"),v(r,"class","dropdown-menu"),v(n,"class","dropdown d-grid gap-2")},m(e,t){m(e,n,t),f(n,o),i.m(o,null),f(n,s),f(n,r);for(let e=0;e<u.length;e+=1)u[e]&&u[e].m(r,null)},p(e,[t]){if(l===(l=c(e))&&i?i.p(e,t):(i.d(1),i=l(e),i&&(i.c(),i.m(o,null))),12&t){let n;for(a=e[2],n=0;n<a.length;n+=1){const o=X(e,a,n);u[n]?u[n].p(o,t):(u[n]=ee(o),u[n].c(),u[n].m(r,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=a.length}},i:e,o:e,d(e){e&&h(n),i.d(),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(u,e)}}}function ne(e,t,n){let{placeholder:o="Choose an option"}=t,{options:s}=t,{selectedValue:r=null}=t;function c(e){n(0,r=e)}return e.$$set=e=>{"placeholder"in e&&n(1,o=e.placeholder),"options"in e&&n(2,s=e.options),"selectedValue"in e&&n(0,r=e.selectedValue)},[r,o,s,c,e=>e.value==r,e=>c(e)]}const oe=class extends K{constructor(e){super(),G(this,e,ne,te,r,{placeholder:1,options:2,selectedValue:0},Q)}};function se(t){let n,o,s;return{c(){n=g("button"),n.textContent="Clear",v(n,"class","btn btn-outline-secondary"),v(n,"type","button")},m(e,r){m(e,n,r),o||(s=y(n,"click",t[6]),o=!0)},p:e,d(e){e&&h(n),o=!1,s()}}}function re(e){let t,n,o,s;return{c(){t=g("div"),t.textContent="Upload new image to replace current image",n=b(),o=g("img"),v(t,"class","mb-2 form-text"),v(o,"class","img-thumbnail mb-2"),l(o.src,s=e[1])||v(o,"src",s),v(o,"alt","Expenses attachment"),C(o,"object-fit","cover"),C(o,"width","100px"),C(o,"height","100px")},m(e,s){m(e,t,s),m(e,n,s),m(e,o,s)},p(e,t){2&t&&!l(o.src,s=e[1])&&v(o,"src",s)},d(e){e&&h(t),e&&h(n),e&&h(o)}}}function ce(t){let n,s,r,c,l,i,a,u=t[0]&&se(t),d=t[0]&&re(t);return{c(){n=g("div"),s=g("input"),r=b(),u&&u.c(),c=b(),d&&d.c(),l=$(""),v(s,"class","form-control"),v(s,"type","file"),v(s,"name","image"),v(s,"accept","image/*"),v(n,"class","mb-2"),k(n,"input-group",t[0])},m(e,o){m(e,n,o),f(n,s),t[5](s),f(n,r),u&&u.m(n,null),m(e,c,o),d&&d.m(e,o),m(e,l,o),i||(a=[y(s,"change",t[4]),y(s,"change",t[3])],i=!0)},p(e,[t]){e[0]?u?u.p(e,t):(u=se(e),u.c(),u.m(n,null)):u&&(u.d(1),u=null),1&t&&k(n,"input-group",e[0]),e[0]?d?d.p(e,t):(d=re(e),d.c(),d.m(l.parentNode,l)):d&&(d.d(1),d=null)},i:e,o:e,d(e){e&&h(n),t[5](null),u&&u.d(),e&&h(c),d&&d.d(e),e&&h(l),i=!1,o(a)}}}function le(e,t,n){let o,{images:s}=t,r="";return e.$$set=e=>{"images"in e&&n(0,s=e.images)},[s,r,o,function(){const[e]=s;e&&n(1,r=URL.createObjectURL(e))},function(){s=this.files,n(0,s)},function(e){O[e?"unshift":"push"]((()=>{o=e,n(2,o)}))},()=>{n(0,s=null),n(2,o.value="",o),n(1,r="")}]}const ie=class extends K{constructor(e){super(),G(this,e,le,ce,r,{images:0})}};function ae(e){let t,n,s,r,c,l,i,a,u,d,p,C,k,E,B,D,V,M,N,S,A,I,T,j,R,q,W,G,K,Q,X,Y,Z,ee,te,ne;function se(t){e[9](t)}let re={options:e[0].map(e[8]),placeholder:"Select an account"};function ce(t){e[12](t)}void 0!==e[3]&&(re.selectedValue=e[3]),c=new oe({props:re}),O.push((()=>U(c,"selectedValue",se)));let le={options:e[2].map(ue),placeholder:"Select a category"};function ae(t){e[13](t)}void 0!==e[6]&&(le.selectedValue=e[6]),j=new oe({props:le}),O.push((()=>U(j,"selectedValue",ce)));let de={};return void 0!==e[7]&&(de.images=e[7]),Y=new ie({props:de}),O.push((()=>U(Y,"images",ae))),{c(){t=g("div"),n=g("div"),s=g("label"),s.textContent="From Account:",r=b(),J(c.$$.fragment),i=b(),a=g("div"),u=g("label"),d=$("Amount ("),p=$(e[1]),C=$("):"),k=b(),E=g("input"),B=b(),D=g("div"),V=g("label"),V.textContent="Description:",M=b(),N=g("input"),S=b(),A=g("div"),I=g("label"),I.textContent="category:",T=b(),J(j.$$.fragment),q=b(),W=g("div"),W.innerHTML='<div class="col-6"></div> \n            <div class="col-6 text-end"><p><a class="card-link" href="/expenses/categories/add?next=/expenses/add">Add new category</a></p></div>',G=b(),K=g("div"),Q=g("label"),Q.textContent="Image:",X=b(),J(Y.$$.fragment),v(s,"for","id_from_account"),v(s,"class","form-label"),v(n,"class","mb-3"),v(u,"class","form-label"),v(u,"for","id_amount"),v(E,"class","form-control"),v(E,"type","number"),v(E,"name","amount"),v(E,"step","0.01"),E.required=!0,v(E,"id","id_amount"),v(a,"class","mb-3"),v(V,"class","form-label"),v(V,"for","id_description"),v(N,"class","form-control"),v(N,"type","text"),v(N,"name","description"),v(N,"maxlength","255"),v(N,"id","id_description"),v(D,"class","mb-3"),v(I,"class","form-label"),v(I,"for","id_category"),v(W,"class","row"),v(Q,"class","form-label"),v(Q,"for","id_image"),v(K,"class","mb-3"),v(t,"class","card-body p-4")},m(o,l){m(o,t,l),f(t,n),f(n,s),f(n,r),z(c,n,null),f(t,i),f(t,a),f(a,u),f(u,d),f(u,p),f(u,C),f(a,k),f(a,E),w(E,e[4]),f(t,B),f(t,D),f(D,V),f(D,M),f(D,N),w(N,e[5]),f(t,S),f(t,A),f(A,I),f(A,T),z(j,A,null),f(A,q),f(A,W),f(t,G),f(t,K),f(K,Q),f(K,X),z(Y,K,null),ee=!0,te||(ne=[y(E,"input",e[10]),y(N,"input",e[11])],te=!0)},p(e,[t]){const n={};3&t&&(n.options=e[0].map(e[8])),!l&&8&t&&(l=!0,n.selectedValue=e[3],L((()=>l=!1))),c.$set(n),(!ee||2&t)&&_(p,e[1]),16&t&&x(E.value)!==e[4]&&w(E,e[4]),32&t&&N.value!==e[5]&&w(N,e[5]);const o={};4&t&&(o.options=e[2].map(ue)),!R&&64&t&&(R=!0,o.selectedValue=e[6],L((()=>R=!1))),j.$set(o);const s={};!Z&&128&t&&(Z=!0,s.images=e[7],L((()=>Z=!1))),Y.$set(s)},i(e){ee||(H(c.$$.fragment,e),H(j.$$.fragment,e),H(Y.$$.fragment,e),ee=!0)},o(e){P(c.$$.fragment,e),P(j.$$.fragment,e),P(Y.$$.fragment,e),ee=!1},d(e){e&&h(t),F(c),F(j),F(Y),te=!1,o(ne)}}}const ue=e=>({selectedDisplay:e.name,optionDisplay:e.name,value:e.slug});function de(e,t,n){let o,s,r,c,{accountBalances:l}=t,{userCurrency:i=""}=t,{expenseCategories:a=[]}=t,u="";return e.$$set=e=>{"accountBalances"in e&&n(0,l=e.accountBalances),"userCurrency"in e&&n(1,i=e.userCurrency),"expenseCategories"in e&&n(2,a=e.expenseCategories)},[l,i,a,u,o,s,r,c,e=>({selectedDisplay:e.name,optionDisplay:`${e.name} - Balance ${i} ${e.balance}`,value:e.slug}),function(e){u=e,n(3,u)},function(){o=x(this.value),n(4,o)},function(){s=this.value,n(5,s)},function(e){r=e,n(6,r)},function(e){c=e,n(7,c)}]}const pe=document.getElementById("user-currency").textContent,fe=JSON.parse(document.getElementById("account-balances").textContent),me=JSON.parse(document.getElementById("expense-categories").textContent);new class extends K{constructor(e){super(),G(this,e,de,ae,r,{accountBalances:0,userCurrency:1,expenseCategories:2})}}({target:document.getElementById("form"),props:{accountBalances:fe,userCurrency:pe,expenseCategories:me}})})();
