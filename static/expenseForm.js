(()=>{"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function s(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let c;function l(e,t){return c||(c=document.createElement("a")),c.href=t,e===c.href}function i(e){return 0===Object.keys(e).length}new Set;const a="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;class u{constructor(e){this.options=e,this._listeners="WeakMap"in a?new WeakMap:void 0}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return null!==(e=this._observer)&&void 0!==e?e:this._observer=new ResizeObserver((e=>{var t;for(const n of e)u.entries.set(n.target,n),null===(t=this._listeners.get(n.target))||void 0===t||t(n)}))}}u.entries="WeakMap"in a?new WeakMap:void 0;let d,p=!1;function f(e,t){e.appendChild(t)}function m(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function g(e){return document.createElement(e)}function $(e){return document.createTextNode(e)}function b(){return $(" ")}function y(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function v(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e){return""===e?null:+e}function _(e,t){t=""+t,e.data!==t&&(e.data=t)}function w(e,t){e.value=null==t?"":t}function k(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function C(e,t,n){e.classList[n?"add":"remove"](t)}function E(e){d=e}new Map;const I=[],B=[];let O=[];const S=[],D=Promise.resolve();let M=!1;function V(e){O.push(e)}function L(e){S.push(e)}const N=new Set;let R=0;function T(){if(0!==R)return;const e=d;do{try{for(;R<I.length;){const e=I[R];R++,E(e),A(e.$$)}}catch(e){throw I.length=0,R=0,e}for(E(null),I.length=0,R=0;B.length;)B.pop()();for(let e=0;e<O.length;e+=1){const t=O[e];N.has(t)||(N.add(t),t())}O.length=0}while(I.length);for(;S.length;)S.pop()();M=!1,N.clear(),E(e)}function A(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(V)}}const q=new Set;let j,H;function P(e,t){e&&e.i&&(q.delete(e),e.i(t))}function U(e,t,n,o){if(e&&e.o){if(q.has(e))return;q.add(e),j.c.push((()=>{q.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function W(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function F(e){e&&e.c()}function J(e,n,r,c){const{fragment:l,after_update:i}=e.$$;l&&l.m(n,r),c||V((()=>{const n=e.$$.on_mount.map(t).filter(s);e.$$.on_destroy?e.$$.on_destroy.push(...n):o(n),e.$$.on_mount=[]})),i.forEach(V)}function X(e,t){const n=e.$$;null!==n.fragment&&(function(e){const t=[],n=[];O.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),O=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function z(t,s,r,c,l,i,a,u=[-1]){const f=d;E(t);const m=t.$$={fragment:null,ctx:[],props:i,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(f?f.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:s.target||f.$$.root};a&&a(m.root);let g=!1;if(m.ctx=r?r(t,s.props||{},((e,n,...o)=>{const s=o.length?o[0]:n;return m.ctx&&l(m.ctx[e],m.ctx[e]=s)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](s),g&&function(e,t){-1===e.$$.dirty[0]&&(I.push(e),M||(M=!0,D.then(T)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],m.update(),g=!0,o(m.before_update),m.fragment=!!c&&c(m.ctx),s.target){if(s.hydrate){p=!0;const e=($=s.target,Array.from($.childNodes));m.fragment&&m.fragment.l(e),e.forEach(h)}else m.fragment&&m.fragment.c();s.intro&&P(t.$$.fragment),J(t,s.target,s.anchor,s.customElement),p=!1,T()}var $;E(f)}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(H=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(t).filter(s);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){o(this.$$.on_disconnect)}$destroy(){X(this,1),this.$destroy=e}$on(t,n){if(!s(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){this.$$set&&!i(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class G{$destroy(){X(this,1),this.$destroy=e}$on(t,n){if(!s(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){this.$$set&&!i(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function K(e){!function(e,t,n){const o=function(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}(e);if(!o.getElementById(t)){const e=g("style");e.id=t,e.textContent="#dropdown-button.svelte-1r3up0i{border-color:#dee2e6;text-align:left}#dropdown-button.svelte-1r3up0i:hover{background-color:white;color:black}",function(e,t){f(e.head||e,t),t.sheet}(o,e)}}(e,"svelte-1r3up0i")}function Q(e,t,n){const o=e.slice();return o[6]=t[n].value,o[7]=t[n].optionDisplay,o}function Y(e){let t;return{c(){t=$(e[1])},m(e,n){m(e,t,n)},p(e,n){2&n&&_(t,e[1])},d(e){e&&h(t)}}}function Z(e){let t,n=e[2].find(e[4]).selectedDisplay+"";return{c(){t=$(n)},m(e,n){m(e,t,n)},p(e,o){5&o&&n!==(n=e[2].find(e[4]).selectedDisplay+"")&&_(t,n)},d(e){e&&h(t)}}}function ee(e){let t,n,o,s,r,c,l=e[7]+"";function i(){return e[5](e[6])}return{c(){t=g("li"),n=g("button"),o=$(l),s=b(),v(n,"class","dropdown-item")},m(e,l){m(e,t,l),f(t,n),f(n,o),f(t,s),r||(c=y(n,"click",i),r=!0)},p(t,n){e=t,4&n&&l!==(l=e[7]+"")&&_(o,l)},d(e){e&&h(t),r=!1,c()}}}function te(t){let n,o,s,r;function c(e,t){return e[0]?Z:Y}let l=c(t),i=l(t),a=t[2],u=[];for(let e=0;e<a.length;e+=1)u[e]=ee(Q(t,a,e));return{c(){n=g("div"),o=g("button"),i.c(),s=b(),r=g("ul");for(let e=0;e<u.length;e+=1)u[e].c();v(o,"id","dropdown-button"),v(o,"class","text-left btn btn-outline-dark dropdown-toggle svelte-1r3up0i"),v(o,"type","button"),v(o,"data-bs-toggle","dropdown"),v(r,"class","dropdown-menu"),v(n,"class","dropdown d-grid gap-2")},m(e,t){m(e,n,t),f(n,o),i.m(o,null),f(n,s),f(n,r);for(let e=0;e<u.length;e+=1)u[e]&&u[e].m(r,null)},p(e,[t]){if(l===(l=c(e))&&i?i.p(e,t):(i.d(1),i=l(e),i&&(i.c(),i.m(o,null))),12&t){let n;for(a=e[2],n=0;n<a.length;n+=1){const o=Q(e,a,n);u[n]?u[n].p(o,t):(u[n]=ee(o),u[n].c(),u[n].m(r,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=a.length}},i:e,o:e,d(e){e&&h(n),i.d(),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(u,e)}}}function ne(e,t,n){let{placeholder:o="Choose an option"}=t,{options:s}=t,{selectedValue:r=null}=t;function c(e){n(0,r=e)}return e.$$set=e=>{"placeholder"in e&&n(1,o=e.placeholder),"options"in e&&n(2,s=e.options),"selectedValue"in e&&n(0,r=e.selectedValue)},[r,o,s,c,e=>e.value==r,e=>c(e)]}const oe=class extends G{constructor(e){super(),z(this,e,ne,te,r,{placeholder:1,options:2,selectedValue:0},K)}};function se(t){let n,o,s;return{c(){n=g("button"),n.textContent="Clear",v(n,"class","btn btn-outline-secondary"),v(n,"type","button")},m(e,r){m(e,n,r),o||(s=y(n,"click",t[6]),o=!0)},p:e,d(e){e&&h(n),o=!1,s()}}}function re(e){let t,n,o,s;return{c(){t=g("div"),t.textContent="Upload new image to replace current image",n=b(),o=g("img"),v(t,"class","mb-2 form-text"),v(o,"class","img-thumbnail mb-2"),l(o.src,s=e[2])||v(o,"src",s),v(o,"alt","Expenses attachment"),k(o,"object-fit","cover"),k(o,"width","100px"),k(o,"height","100px")},m(e,s){m(e,t,s),m(e,n,s),m(e,o,s)},p(e,t){4&t&&!l(o.src,s=e[2])&&v(o,"src",s)},d(e){e&&h(t),e&&h(n),e&&h(o)}}}function ce(t){let n,s,r,c,l,i,a,u=t[1]&&se(t),d=t[1]&&re(t);return{c(){n=g("div"),s=g("input"),r=b(),u&&u.c(),c=b(),d&&d.c(),l=$(""),v(s,"class","form-control"),v(s,"type","file"),v(s,"name","image"),v(s,"accept","image/*"),v(n,"class","mb-2"),C(n,"input-group",t[1])},m(e,o){m(e,n,o),f(n,s),t[5](s),f(n,r),u&&u.m(n,null),m(e,c,o),d&&d.m(e,o),m(e,l,o),i||(a=[y(s,"change",t[4]),y(s,"change",t[3])],i=!0)},p(e,[t]){e[1]?u?u.p(e,t):(u=se(e),u.c(),u.m(n,null)):u&&(u.d(1),u=null),2&t&&C(n,"input-group",e[1]),e[1]?d?d.p(e,t):(d=re(e),d.c(),d.m(l.parentNode,l)):d&&(d.d(1),d=null)},i:e,o:e,d(e){e&&h(n),t[5](null),u&&u.d(),e&&h(c),d&&d.d(e),e&&h(l),i=!1,o(a)}}}function le(e,t,n){let o,{imageInput:s}=t,r="";return e.$$set=e=>{"imageInput"in e&&n(0,s=e.imageInput)},[s,o,r,function(){const[e]=o;e&&n(2,r=URL.createObjectURL(e))},function(){o=this.files,n(1,o)},function(e){B[e?"unshift":"push"]((()=>{s=e,n(0,s)}))},()=>{n(1,o=null),n(0,s.value="",s),n(2,r="")}]}const ie=class extends G{constructor(e){super(),z(this,e,le,ce,r,{imageInput:0})}};function ae(e){let t,n,r,c,l,i,a,u,d,p,k,C,E,I,O,S,D,M,V,N,R,T,A,q,j,H,z,G,K,Q,Y,Z,ee,te,ne,se,re,ce;function le(t){e[11](t)}let ae={options:e[0].map(e[10]),placeholder:"Select an account"};function de(t){e[14](t)}void 0!==e[3]&&(ae.selectedValue=e[3]),l=new oe({props:ae}),B.push((()=>W(l,"selectedValue",le)));let pe={options:e[2].map(ue),placeholder:"Select a category"};function fe(t){e[15](t)}void 0!==e[5]&&(pe.selectedValue=e[5]),q=new oe({props:pe}),B.push((()=>W(q,"selectedValue",de)));let me={};return void 0!==e[7]&&(me.imageInput=e[7]),Z=new ie({props:me}),B.push((()=>W(Z,"imageInput",fe))),{c(){t=g("div"),n=g("div"),r=g("label"),r.textContent="From Account:",c=b(),F(l.$$.fragment),a=b(),u=g("div"),d=g("label"),p=$("Amount ("),k=$(e[1]),C=$("):"),E=b(),I=g("input"),O=b(),S=g("div"),D=g("label"),D.textContent="Description:",M=b(),V=g("input"),N=b(),R=g("div"),T=g("label"),T.textContent="category:",A=b(),F(q.$$.fragment),H=b(),z=g("div"),z.innerHTML='<div class="col-6"></div> \n            <div class="col-6 text-end"><p><a class="card-link" href="/expenses/categories/add?next=/expenses/add">Add new category</a></p></div>',G=b(),K=g("div"),Q=g("label"),Q.textContent="Image:",Y=b(),F(Z.$$.fragment),te=b(),ne=g("button"),ne.textContent="Create",v(r,"for","id_from_account"),v(r,"class","form-label"),v(n,"class","mb-3"),v(d,"class","form-label"),v(d,"for","id_amount"),v(I,"class","form-control"),v(I,"type","number"),v(I,"name","amount"),v(I,"step","0.01"),I.required=!0,v(I,"id","id_amount"),v(u,"class","mb-3"),v(D,"class","form-label"),v(D,"for","id_description"),v(V,"class","form-control"),v(V,"type","text"),v(V,"name","description"),v(V,"maxlength","255"),v(V,"id","id_description"),v(S,"class","mb-3"),v(T,"class","form-label"),v(T,"for","id_category"),v(z,"class","row"),v(Q,"class","form-label"),v(Q,"for","id_image"),v(K,"class","mb-3"),v(ne,"class","mt-3 btn btn-primary"),v(t,"class","card-body p-4")},m(o,i){m(o,t,i),f(t,n),f(n,r),f(n,c),J(l,n,null),f(t,a),f(t,u),f(u,d),f(d,p),f(d,k),f(d,C),f(u,E),f(u,I),w(I,e[4]),f(t,O),f(t,S),f(S,D),f(S,M),f(S,V),w(V,e[6]),f(t,N),f(t,R),f(R,T),f(R,A),J(q,R,null),f(R,H),f(R,z),f(t,G),f(t,K),f(K,Q),f(K,Y),J(Z,K,null),f(t,te),f(t,ne),se=!0,re||(ce=[y(I,"input",e[12]),y(V,"input",e[13]),y(ne,"click",(function(){s(e[8]&&e[9])&&(e[8]&&e[9]).apply(this,arguments)}))],re=!0)},p(t,[n]){e=t;const o={};3&n&&(o.options=e[0].map(e[10])),!i&&8&n&&(i=!0,o.selectedValue=e[3],L((()=>i=!1))),l.$set(o),(!se||2&n)&&_(k,e[1]),16&n&&x(I.value)!==e[4]&&w(I,e[4]),64&n&&V.value!==e[6]&&w(V,e[6]);const s={};4&n&&(s.options=e[2].map(ue)),!j&&32&n&&(j=!0,s.selectedValue=e[5],L((()=>j=!1))),q.$set(s);const r={};!ee&&128&n&&(ee=!0,r.imageInput=e[7],L((()=>ee=!1))),Z.$set(r)},i(e){se||(P(l.$$.fragment,e),P(q.$$.fragment,e),P(Z.$$.fragment,e),se=!0)},o(e){U(l.$$.fragment,e),U(q.$$.fragment,e),U(Z.$$.fragment,e),se=!1},d(e){e&&h(t),X(l),X(q),X(Z),re=!1,o(ce)}}}const ue=e=>({selectedDisplay:e.name,optionDisplay:e.name,value:e.slug});function de(e,t,n){let o,s,r,c,l,{accountBalances:i}=t,{userCurrency:a=""}=t,{expenseCategories:u=[]}=t,d="";return e.$$set=e=>{"accountBalances"in e&&n(0,i=e.accountBalances),"userCurrency"in e&&n(1,a=e.userCurrency),"expenseCategories"in e&&n(2,u=e.expenseCategories)},e.$$.update=()=>{56&e.$$.dirty&&n(8,o=Boolean(d&&s&&c))},[i,a,u,d,s,c,r,l,o,function(){const e=new FormData;e.append("amount",s.toString()),e.append("description",r),e.append("category",c),e.append("from_account",d),l&&(console.log(typeof l),e.append("image",l.files[0],l.value));const t=new XMLHttpRequest;t.open("POST",window.location.href),t.setRequestHeader("X-CSRFToken",function(e){let t=null;if(document.cookie&&""!==document.cookie){const n=document.cookie.split(";");for(let o=0;o<n.length;o++){const s=n[o].trim();if(s.substring(0,10)===e+"="){t=decodeURIComponent(s.substring(10));break}}}return t}("csrftoken")),t.send(e)},e=>({selectedDisplay:e.name,optionDisplay:`${e.name} - Balance ${a} ${e.balance}`,value:e.slug}),function(e){d=e,n(3,d)},function(){s=x(this.value),n(4,s)},function(){r=this.value,n(6,r)},function(e){c=e,n(5,c)},function(e){l=e,n(7,l)}]}const pe=document.getElementById("user-currency").textContent,fe=JSON.parse(document.getElementById("account-balances").textContent),me=JSON.parse(document.getElementById("expense-categories").textContent);new class extends G{constructor(e){super(),z(this,e,de,ae,r,{accountBalances:0,userCurrency:1,expenseCategories:2})}}({target:document.getElementById("form"),props:{accountBalances:fe,userCurrency:pe,expenseCategories:me}})})();
