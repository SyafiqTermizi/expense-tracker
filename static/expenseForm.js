(()=>{"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function r(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e){return 0===Object.keys(e).length}new Set;const l="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;class u{constructor(e){this.options=e,this._listeners="WeakMap"in l?new WeakMap:void 0}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return null!==(e=this._observer)&&void 0!==e?e:this._observer=new ResizeObserver((e=>{var t;for(const n of e)u.entries.set(n.target,n),null===(t=this._listeners.get(n.target))||void 0===t||t(n)}))}}u.entries="WeakMap"in l?new WeakMap:void 0;let i,a=!1;function d(e,t){e.appendChild(t)}function f(e,t,n){e.insertBefore(t,n||null)}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function g(e){return document.createTextNode(e)}function $(){return g(" ")}function b(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function v(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function _(e){return""===e?null:+e}function y(e,t){t=""+t,e.data!==t&&(e.data=t)}function x(e,t){e.value=null==t?"":t}function w(e,t,n){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function C(e){i=e}new Map;const k=[],B=[];let E=[];const A=[],O=Promise.resolve();let M=!1;function S(e){E.push(e)}const N=new Set;let I=0;function T(){if(0!==I)return;const e=i;do{try{for(;I<k.length;){const e=k[I];I++,C(e),q(e.$$)}}catch(e){throw k.length=0,I=0,e}for(C(null),k.length=0,I=0;B.length;)B.pop()();for(let e=0;e<E.length;e+=1){const t=E[e];N.has(t)||(N.add(t),t())}E.length=0}while(k.length);for(;A.length;)A.pop()();M=!1,N.clear(),C(e)}function q(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(S)}}const L=new Set;let W,j;function D(e,t){e&&e.i&&(L.delete(e),e.i(t))}function H(e,n,c,s){const{fragment:l,after_update:u}=e.$$;l&&l.m(n,c),s||S((()=>{const n=e.$$.on_mount.map(t).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...n):o(n),e.$$.on_mount=[]})),u.forEach(S)}function R(e,t){const n=e.$$;null!==n.fragment&&(function(e){const t=[],n=[];E.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),E=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function J(t,r,c,s,l,u,d,f=[-1]){const h=i;C(t);const m=t.$$={fragment:null,ctx:[],props:u,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(h?h.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:r.target||h.$$.root};d&&d(m.root);let g=!1;if(m.ctx=c?c(t,r.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return m.ctx&&l(m.ctx[e],m.ctx[e]=r)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](r),g&&function(e,t){-1===e.$$.dirty[0]&&(k.push(e),M||(M=!0,O.then(T)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],m.update(),g=!0,o(m.before_update),m.fragment=!!s&&s(m.ctx),r.target){if(r.hydrate){a=!0;const e=($=r.target,Array.from($.childNodes));m.fragment&&m.fragment.l(e),e.forEach(p)}else m.fragment&&m.fragment.c();r.intro&&D(t.$$.fragment),H(t,r.target,r.anchor,r.customElement),a=!1,T()}var $;C(h)}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(j=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(t).filter(r);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){o(this.$$.on_disconnect)}$destroy(){R(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){this.$$set&&!s(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class z{$destroy(){R(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){this.$$set&&!s(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function F(e){!function(e,t,n){const o=function(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}(e);if(!o.getElementById(t)){const e=m("style");e.id=t,e.textContent="#dropdown-button.svelte-1r3up0i{border-color:#dee2e6;text-align:left}#dropdown-button.svelte-1r3up0i:hover{background-color:white;color:black}",function(e,t){d(e.head||e,t),t.sheet}(o,e)}}(e,"svelte-1r3up0i")}function P(e,t,n){const o=e.slice();return o[6]=t[n].slug,o[7]=t[n].name,o[8]=t[n].balance,o}function G(t){let n;return{c(){n=g("Select an account")},m(e,t){f(e,n,t)},p:e,d(e){e&&p(n)}}}function K(e){let t,n=e[1].find(e[4]).name+"";return{c(){t=g(n)},m(e,n){f(e,t,n)},p(e,o){3&o&&n!==(n=e[1].find(e[4]).name+"")&&y(t,n)},d(e){e&&p(t)}}}function Q(e){let t,n,o,r,c,s,l,u,i,a,h=e[7]+"",_=e[8]+"";function x(){return e[5](e[6])}return{c(){t=m("li"),n=m("button"),o=g(h),r=g(" - balance: "),c=g(e[2]),s=$(),l=g(_),u=$(),v(n,"class","dropdown-item")},m(e,p){f(e,t,p),d(t,n),d(n,o),d(n,r),d(n,c),d(n,s),d(n,l),d(t,u),i||(a=b(n,"click",x),i=!0)},p(t,n){e=t,2&n&&h!==(h=e[7]+"")&&y(o,h),4&n&&y(c,e[2]),2&n&&_!==(_=e[8]+"")&&y(l,_)},d(e){e&&p(t),i=!1,a()}}}function U(t){let n,o,r,c;function s(e,t){return e[0]?K:G}let l=s(t),u=l(t),i=t[1],a=[];for(let e=0;e<i.length;e+=1)a[e]=Q(P(t,i,e));return{c(){n=m("div"),o=m("button"),u.c(),r=$(),c=m("ul");for(let e=0;e<a.length;e+=1)a[e].c();v(o,"id","dropdown-button"),v(o,"class","text-left btn btn-outline-dark dropdown-toggle svelte-1r3up0i"),v(o,"type","button"),v(o,"data-bs-toggle","dropdown"),v(c,"class","dropdown-menu"),v(n,"class","dropdown d-grid gap-2")},m(e,t){f(e,n,t),d(n,o),u.m(o,null),d(n,r),d(n,c);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(c,null)},p(e,[t]){if(l===(l=s(e))&&u?u.p(e,t):(u.d(1),u=l(e),u&&(u.c(),u.m(o,null))),14&t){let n;for(i=e[1],n=0;n<i.length;n+=1){const o=P(e,i,n);a[n]?a[n].p(o,t):(a[n]=Q(o),a[n].c(),a[n].m(c,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}},i:e,o:e,d(e){e&&p(n),u.d(),h(a,e)}}}function V(e,t,n){let{accountBalances:o}=t,{userCurrency:r=""}=t,{selectedAccount:c=null}=t;function s(e){n(0,c=e)}return e.$$set=e=>{"accountBalances"in e&&n(1,o=e.accountBalances),"userCurrency"in e&&n(2,r=e.userCurrency),"selectedAccount"in e&&n(0,c=e.selectedAccount)},[c,o,r,s,e=>e.slug==c,e=>s(e)]}const X=class extends z{constructor(e){super(),J(this,e,V,U,c,{accountBalances:1,userCurrency:2,selectedAccount:0},F)}};function Y(e,t,n){const o=e.slice();return o[6]=t[n],o}function Z(e){let t,n,o,r,c=e[6].name+"";return{c(){t=m("option"),n=g(c),o=$(),t.__value=r=e[6].slug,t.value=t.__value},m(e,r){f(e,t,r),d(t,n),d(t,o)},p(e,o){4&o&&c!==(c=e[6].name+"")&&y(n,c),4&o&&r!==(r=e[6].slug)&&(t.__value=r,t.value=t.__value)},d(e){e&&p(t)}}}function ee(e){let t,n,r,c,s,l,u,i,a,C,k,E,O,M,N,I,T,q,j,J,z,F,P,G,K,Q,U,V,ee,te;function ne(t){e[7](t)}let oe={accountBalances:e[0],userCurrency:e[1]};void 0!==e[3]&&(oe.selectedAccount=e[3]),s=new X({props:oe}),B.push((()=>function(e,t,n){const o=e.$$.props.selectedAccount;void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}(s,0,ne)));let re=e[2],ce=[];for(let t=0;t<re.length;t+=1)ce[t]=Z(Y(e,re,t));return{c(){var o;t=m("div"),n=m("div"),r=m("label"),r.textContent="From Account:",c=$(),(o=s.$$.fragment)&&o.c(),u=$(),i=m("div"),a=m("label"),C=g("Amount ("),k=g(e[1]),E=g("):"),O=$(),M=m("input"),N=$(),I=m("div"),T=m("label"),T.textContent="Description:",q=$(),j=m("input"),J=$(),z=m("div"),F=m("label"),F.textContent="category:",P=$(),G=m("select"),K=m("option"),K.textContent="----";for(let e=0;e<ce.length;e+=1)ce[e].c();Q=$(),U=m("div"),U.innerHTML='<div class="col-6"></div> \n            <div class="col-6 text-end"><p><a class="card-link" href="/expenses/categories/add?next=/expenses/add">Add new category</a></p></div>',v(r,"for","id_from_account"),v(r,"class","form-label"),v(n,"class","mb-3"),v(a,"class","form-label"),v(a,"for","id_amount"),v(M,"class","form-control"),v(M,"type","number"),v(M,"name","amount"),v(M,"step","0.01"),M.required=!0,v(M,"id","id_amount"),v(i,"class","mb-3"),v(T,"class","form-label"),v(T,"for","id_description"),v(j,"class","form-control"),v(j,"type","text"),v(j,"name","description"),v(j,"maxlength","255"),v(j,"id","id_description"),v(I,"class","mb-3"),v(F,"class","form-label"),v(F,"for","id_category"),K.__value="",K.value=K.__value,v(G,"class","form-select"),v(G,"name","category"),v(G,"id","id_category"),void 0===e[6]&&S((()=>e[10].call(G))),v(U,"class","row"),v(t,"class","card-body p-4")},m(o,l){f(o,t,l),d(t,n),d(n,r),d(n,c),H(s,n,null),d(t,u),d(t,i),d(i,a),d(a,C),d(a,k),d(a,E),d(i,O),d(i,M),x(M,e[4]),d(t,N),d(t,I),d(I,T),d(I,q),d(I,j),x(j,e[5]),d(t,J),d(t,z),d(z,F),d(z,P),d(z,G),d(G,K);for(let e=0;e<ce.length;e+=1)ce[e]&&ce[e].m(G,null);w(G,e[6],!0),d(z,Q),d(z,U),V=!0,ee||(te=[b(M,"input",e[8]),b(j,"input",e[9]),b(G,"change",e[10])],ee=!0)},p(e,[t]){const n={};var o;if(1&t&&(n.accountBalances=e[0]),2&t&&(n.userCurrency=e[1]),!l&&8&t&&(l=!0,n.selectedAccount=e[3],o=()=>l=!1,A.push(o)),s.$set(n),(!V||2&t)&&y(k,e[1]),16&t&&_(M.value)!==e[4]&&x(M,e[4]),32&t&&j.value!==e[5]&&x(j,e[5]),4&t){let n;for(re=e[2],n=0;n<re.length;n+=1){const o=Y(e,re,n);ce[n]?ce[n].p(o,t):(ce[n]=Z(o),ce[n].c(),ce[n].m(G,null))}for(;n<ce.length;n+=1)ce[n].d(1);ce.length=re.length}68&t&&w(G,e[6])},i(e){V||(D(s.$$.fragment,e),V=!0)},o(e){(function(e,t,n,o){if(e&&e.o){if(L.has(e))return;L.add(e),W.c.push((()=>{L.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()})(s.$$.fragment,e),V=!1},d(e){e&&p(t),R(s),h(ce,e),ee=!1,o(te)}}}function te(e,t,n){let o,r,c,{accountBalances:s}=t,{userCurrency:l=""}=t,{expenseCategories:u=[]}=t,i="";return e.$$set=e=>{"accountBalances"in e&&n(0,s=e.accountBalances),"userCurrency"in e&&n(1,l=e.userCurrency),"expenseCategories"in e&&n(2,u=e.expenseCategories)},[s,l,u,i,o,r,c,function(e){i=e,n(3,i)},function(){o=_(this.value),n(4,o)},function(){r=this.value,n(5,r)},function(){c=function(e){const t=e.querySelector(":checked");return t&&t.__value}(this),n(6,c),n(2,u)}]}const ne=document.getElementById("user-currency").textContent,oe=JSON.parse(document.getElementById("account-balances").textContent),re=JSON.parse(document.getElementById("expense-categories").textContent);new class extends z{constructor(e){super(),J(this,e,te,ee,c,{accountBalances:0,userCurrency:1,expenseCategories:2})}}({target:document.getElementById("form"),props:{accountBalances:oe,userCurrency:ne,expenseCategories:re}})})();
