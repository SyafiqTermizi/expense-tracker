{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="row mt-4">
    <div class="col-6">
        <h3>{{ account.name|title }}</h3>
        {% if account.description %}
        <p class="text-secondary">
            {{ account.description|title }} detail
        </p>
        {% else %}
        <p class="text-secondary">
            {{ account.name|title }}
        </p>
        {% endif %}
    </div>
    <div class="col-6 text-end">
        <a href="{% url 'accounts:update_view' account.slug %}" class="mt-3 btn btn-outline-primary">Edit</a>
        <a class="mt-3 btn btn-danger" href="{% url 'accounts:delete_view' account.slug %}">Delete</a>
    </div>
</div>
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body p-4">
                <h4 class="card-title">Available Balance: {{ request.user.currency }} {{ available_balance }}</h4>
                <div id="chart"></div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-5">
    <div class="col-8" id="transaction-filter"></div>
    <div class="col-4" id="transaction-search"></div>
</div>
<div class="row mt-2 mb-5" id="transaction-list"></div>

{% for transaction in transactions %}
    {% if transaction.expense %}
    {% include "partial/expense_modal.html" with uid=transaction.uid description=transaction.description account=transaction.account amount=transaction.amount category=transaction.category created_at=transaction.created_at image=transaction.image %}
    {% endif %}
{% endfor %}

{{ balances|json_script:"balances-data" }}
{{ transactions|json_script:"transaction-data" }}
<script src="{% static 'transactions.js' %}"></script>
<script src="{% static 'accountDetail.js' %}"></script>
{% endblock content %}